<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Github Actions 备忘清单 | Hexo</title>
  <meta name="description" content="Github Actions 备忘清单本备忘单总结了 Github Actions 常用的配置说明，以供快速参考。 入门介绍GitHub Actions 的仓库中自动化、自定义和执行软件开发工作流程，有四个基本的概念，如下：    :- :-    workflow (工作流程) 持续集成一次运行的过程，就是一个 workflow   job (任务) 一个 workflow 由一个或多个 job">
<meta property="og:type" content="article">
<meta property="og:title" content="Github Actions 备忘清单">
<meta property="og:url" content="https://github.com/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-actions/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:description" content="Github Actions 备忘清单本备忘单总结了 Github Actions 常用的配置说明，以供快速参考。 入门介绍GitHub Actions 的仓库中自动化、自定义和执行软件开发工作流程，有四个基本的概念，如下：    :- :-    workflow (工作流程) 持续集成一次运行的过程，就是一个 workflow   job (任务) 一个 workflow 由一个或多个 job">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-08T06:36:10.000Z">
<meta property="article:modified_time" content="2024-04-11T02:09:18.766Z">
<meta property="article:author" content="KK">
<meta property="article:tag" content="快速参考备忘清单">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://github.com/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-actions/index.html">
  
    <link rel="alternate" href="/atom.xml" title="KK" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/k705/kk.github.io.git/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 7.1.1"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/cofess" target="_blank">
          <img class="img-circle img-rotate" src="/k705/kk.github.io.git/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">KK</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shanghai, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/k705/kk.github.io.git/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/k705/kk.github.io.git/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/k705/kk.github.io.git/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/k705/kk.github.io.git/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/k705/kk.github.io.git/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-books">
          <a href="/k705/kk.github.io.git/books">
            
            <i class="icon icon-book-fill"></i>
            
            <span class="menu-title">书单</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/k705/kk.github.io.git/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/k705/kk.github.io.git/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/k705/kk.github.io.git/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      

    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Ajax/" rel="tag">Ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/AntDesign/" rel="tag">AntDesign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Axios/" rel="tag">Axios</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/ES/" rel="tag">ES</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/HTML-CSS/" rel="tag">HTML+CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Html/" rel="tag">Html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/JS/" rel="tag">JS</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Java/" rel="tag">Java</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Js/" rel="tag">Js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Js%E5%B7%A5%E5%85%B7%E5%BA%93/" rel="tag">Js工具库</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Mysql/" rel="tag">Mysql</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/TS/" rel="tag">TS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Umi/" rel="tag">Umi</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Vue/" rel="tag">Vue</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Vue2/" rel="tag">Vue2</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/Vue3/" rel="tag">Vue3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/antDesign/" rel="tag">antDesign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/go/" rel="tag">go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/jQuery/" rel="tag">jQuery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/react/" rel="tag">react</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">云服务器</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" rel="tag">代码规范</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%89%8D%E7%AB%AFUI%E5%BA%93/" rel="tag">前端UI库</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%B0%81%E8%A3%85JavaScript%E5%B7%A5%E5%85%B7%E5%8C%85/" rel="tag">封装JavaScript工具包</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/" rel="tag">底层知识</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">微信小程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83%E5%A4%87%E5%BF%98%E6%B8%85%E5%8D%95/" rel="tag">快速参考备忘清单</a><span class="tag-list-count">34</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E9%85%8D%E7%BD%AE/" rel="tag">配置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/k705/kk.github.io.git/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">23</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/k705/kk.github.io.git/tags/Ajax/" style="font-size: 13px;">Ajax</a> <a href="/k705/kk.github.io.git/tags/AntDesign/" style="font-size: 13px;">AntDesign</a> <a href="/k705/kk.github.io.git/tags/Axios/" style="font-size: 13.08px;">Axios</a> <a href="/k705/kk.github.io.git/tags/CSS/" style="font-size: 13.31px;">CSS</a> <a href="/k705/kk.github.io.git/tags/ES/" style="font-size: 13.92px;">ES</a> <a href="/k705/kk.github.io.git/tags/Git/" style="font-size: 13.23px;">Git</a> <a href="/k705/kk.github.io.git/tags/HTML-CSS/" style="font-size: 13px;">HTML+CSS</a> <a href="/k705/kk.github.io.git/tags/Html/" style="font-size: 13px;">Html</a> <a href="/k705/kk.github.io.git/tags/JS/" style="font-size: 13.77px;">JS</a> <a href="/k705/kk.github.io.git/tags/Java/" style="font-size: 13.54px;">Java</a> <a href="/k705/kk.github.io.git/tags/Js/" style="font-size: 13px;">Js</a> <a href="/k705/kk.github.io.git/tags/Js%E5%B7%A5%E5%85%B7%E5%BA%93/" style="font-size: 13.23px;">Js工具库</a> <a href="/k705/kk.github.io.git/tags/Mysql/" style="font-size: 13.08px;">Mysql</a> <a href="/k705/kk.github.io.git/tags/TS/" style="font-size: 13.15px;">TS</a> <a href="/k705/kk.github.io.git/tags/Umi/" style="font-size: 13.08px;">Umi</a> <a href="/k705/kk.github.io.git/tags/Vue/" style="font-size: 13.38px;">Vue</a> <a href="/k705/kk.github.io.git/tags/Vue2/" style="font-size: 13.77px;">Vue2</a> <a href="/k705/kk.github.io.git/tags/Vue3/" style="font-size: 13px;">Vue3</a> <a href="/k705/kk.github.io.git/tags/antDesign/" style="font-size: 13px;">antDesign</a> <a href="/k705/kk.github.io.git/tags/go/" style="font-size: 13px;">go</a> <a href="/k705/kk.github.io.git/tags/jQuery/" style="font-size: 13px;">jQuery</a> <a href="/k705/kk.github.io.git/tags/nodejs/" style="font-size: 13.46px;">nodejs</a> <a href="/k705/kk.github.io.git/tags/react/" style="font-size: 13.54px;">react</a> <a href="/k705/kk.github.io.git/tags/webpack/" style="font-size: 13.23px;">webpack</a> <a href="/k705/kk.github.io.git/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13.23px;">云服务器</a> <a href="/k705/kk.github.io.git/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 13px;">代码规范</a> <a href="/k705/kk.github.io.git/tags/%E5%89%8D%E7%AB%AFUI%E5%BA%93/" style="font-size: 13.38px;">前端UI库</a> <a href="/k705/kk.github.io.git/tags/%E5%B0%81%E8%A3%85JavaScript%E5%B7%A5%E5%85%B7%E5%8C%85/" style="font-size: 13.69px;">封装JavaScript工具包</a> <a href="/k705/kk.github.io.git/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 13.08px;">工具</a> <a href="/k705/kk.github.io.git/tags/%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/" style="font-size: 13.62px;">底层知识</a> <a href="/k705/kk.github.io.git/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 13px;">微信小程序</a> <a href="/k705/kk.github.io.git/tags/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83%E5%A4%87%E5%BF%98%E6%B8%85%E5%8D%95/" style="font-size: 14px;">快速参考备忘清单</a> <a href="/k705/kk.github.io.git/tags/%E6%AD%A3%E5%88%99/" style="font-size: 13.08px;">正则</a> <a href="/k705/kk.github.io.git/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 13.62px;">软件</a> <a href="/k705/kk.github.io.git/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 13px;">配置</a> <a href="/k705/kk.github.io.git/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 13.85px;">面试</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/k705/kk.github.io.git/archives/2024/04/">四月 2024</a><span class="archive-list-count">241</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/k705/kk.github.io.git/2024/04/25/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" class="title">代码规范</a>
              </p>
              <p class="item-date">
                <time datetime="2024-04-25T09:08:57.000Z" itemprop="datePublished">2024-04-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/k705/kk.github.io.git/2024/04/25/%E5%B7%A5%E5%85%B7-vscode%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E6%8A%80%E5%B7%A7/" class="title">vscode 功能与技巧</a>
              </p>
              <p class="item-date">
                <time datetime="2024-04-25T03:22:46.000Z" itemprop="datePublished">2024-04-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/k705/kk.github.io.git/2024/04/22/Vue3-pure-admin/" class="title">Vue3-pure-admin</a>
              </p>
              <p class="item-date">
                <time datetime="2024-04-22T01:58:28.000Z" itemprop="datePublished">2024-04-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/k705/kk.github.io.git/2024/04/08/Ajax%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="title">Ajax笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2024-04-08T06:36:10.000Z" itemprop="datePublished">2024-04-08</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/k705/kk.github.io.git/2024/04/08/AntDesignOfReact%E5%B0%81%E8%A3%85-Table%E5%8F%8A%E5%85%B6%E7%AD%9B%E9%80%89%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/" class="title">AntDesign封装</a>
              </p>
              <p class="item-date">
                <time datetime="2024-04-08T06:36:10.000Z" itemprop="datePublished">2024-04-08</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-快速参考-github-actions" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Github Actions 备忘清单
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-actions/" class="article-date">
	  <time datetime="2024-04-08T06:36:10.000Z" itemprop="datePublished">2024-04-08</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/k705/kk.github.io.git/tags/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83%E5%A4%87%E5%BF%98%E6%B8%85%E5%8D%95/" rel="tag">快速参考备忘清单</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-actions/#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="Github-Actions-备忘清单"><a href="#Github-Actions-备忘清单" class="headerlink" title="Github Actions 备忘清单"></a>Github Actions 备忘清单</h1><p>本备忘单总结了 <a href="https://github.com/actions">Github Actions</a> 常用的配置说明，以供快速参考。</p>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>GitHub <a href="https://github.com/actions">Actions</a> 的仓库中自动化、自定义和执行软件开发工作流程，有四个基本的概念，如下：</p>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>workflow</code> <em>(工作流程)</em></td>
<td align="left">持续集成一次运行的过程，就是一个 <code>workflow</code></td>
</tr>
<tr>
<td align="left"><code>job</code> <em>(任务)</em></td>
<td align="left">一个 <code>workflow</code> 由一个或多个 <code>jobs</code> 构成，含义是一次持续集成的运行，可以完成多个任务</td>
</tr>
<tr>
<td align="left"><code>step</code> <em>(步骤)</em></td>
<td align="left">每个 <code>job</code> 由多个 <code>step</code> 构成，一步步完成</td>
</tr>
<tr>
<td align="left"><code>action</code> <em>(动作)</em></td>
<td align="left">每个 <code>step</code> 可以依次执行一个或多个命令(<code>action</code>)</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<hr>
<ul>
<li>采用 <a href="./yaml.md">YAML</a> 格式定义配置文件</li>
<li>存放在代码仓库的 <code>.github/workflows</code> 目录中</li>
<li>后缀名统一为 <code>.yml</code>，比如 <code>ci.yml</code></li>
<li>一个库可以有多个 <code>workflow</code> 文件</li>
<li>根据配置事件自动运行配置文件<!--rehype:className=style-round--></li>
</ul>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight yaml"><figcaption><span>&#123;3,5,10&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Actions</span> <span class="string">Demo</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 任务</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 步骤 根据步骤执行任务</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br></pre></td></tr></table></figure>

<p>存放到 <code>.github/workflows</code> 目录中，命名为 <code>ci.yml</code>，当 <code>push</code> 代码到仓库 <code>main</code> 分支中，该配置自动运行配置。</p>
<h3 id="指定触发"><a href="#指定触发" class="headerlink" title="指定触发"></a>指定触发</h3><!--rehype:wrap-class=row-span-2-->

<p><code>push</code> 事件触发 <code>workflow</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span> <span class="string">push</span></span><br></pre></td></tr></table></figure>

<p><code>push</code> 事件或 <code>pull_request</code> 事件都可以触发 <code>workflow</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">pull_request</span>]</span><br></pre></td></tr></table></figure>

<p>只有在 <code>main</code> 分支 <code>push</code> 事件触发 <code>workflow</code></p>
<figure class="highlight yaml"><figcaption><span>&#123;2&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>

<p><code>push</code> 事件触发 <code>workflow</code>，<code>docs</code> 目录下的更改 <code>push</code> 事件不触发 <code>workflow</code></p>
<figure class="highlight yaml"><figcaption><span>&#123;2,4&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">paths-ignore:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;docs/**&#x27;</span></span><br></pre></td></tr></table></figure>

<p>push 事件触发 workflow，包括 sub-project 目录或其子目录中的文件触发 workflow，除非该文件在 sub-project&#x2F;docs 目录中，不触发 workflow</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;sub-project/**&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;!sub-project/docs/**&#x27;</span></span><br></pre></td></tr></table></figure>

<p>版本发布为 <code>published</code> 时运行工作流程。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">published</span>]</span><br></pre></td></tr></table></figure>

<h3 id="多项任务"><a href="#多项任务" class="headerlink" title="多项任务"></a>多项任务</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span>  <span class="comment"># 第一个任务</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">job</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">my_second_job:</span> <span class="comment"># 第二个任务</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">My</span> <span class="string">second</span> <span class="string">job</span></span><br></pre></td></tr></table></figure>

<p>通过 jobs <code>(jobs.&lt;job_id&gt;.name)</code>字段，配置一项或多项需要执行的任务</p>
<h3 id="多项任务依赖关系"><a href="#多项任务依赖关系" class="headerlink" title="多项任务依赖关系"></a>多项任务依赖关系</h3><p>通过 needs <code>(jobs.&lt;job_id&gt;.needs)</code>字段，指定当前任务的依赖关系</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">  <span class="attr">job3:</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">job1</span>, <span class="string">job2</span>]</span><br></pre></td></tr></table></figure>

<p>上面配置中，<code>job1</code> 必须先于 <code>job2</code> 完成，而 <code>job3</code> 等待 <code>job1</code> 和 <code>job2</code> 的完成才能运行。因此，这个 <code>workflow</code> 的运行顺序依次为：<code>job1</code>、<code>job2</code>、<code>job3</code></p>
<h3 id="多项任务传递参数"><a href="#多项任务传递参数" class="headerlink" title="多项任务传递参数"></a>多项任务传递参数</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight yml"><figcaption><span>&#123;2,5,9,11,15&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 将步骤输出映射到作业输出</span></span><br><span class="line">    <span class="attr">outputs:</span></span><br><span class="line">      <span class="attr">output1:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.step1.outputs.test</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">output2:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.step2.outputs.test</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">step1</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=test::hello&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">step2</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=test::world&quot;</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$&#123;&#123;needs.job1.outputs.output1&#125;&#125;</span> <span class="string">$&#123;&#123;needs.job1.outputs.output2&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="指定每项任务的虚拟机环境"><a href="#指定每项任务的虚拟机环境" class="headerlink" title="指定每项任务的虚拟机环境"></a>指定每项任务的虚拟机环境</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br></pre></td></tr></table></figure>

<p>指定运行所需要的虚拟机环境，⚠️ 它是必填字段</p>
<figure class="highlight yml"><figcaption><span>&#123;3&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span> <span class="comment"># 任务名称</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span> <span class="comment"># 虚拟机环境配置</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><code>Windows Server 2022</code> <em>(windows-latest)</em> 或 <em>(windows-2022)</em></li>
<li><code>Ubuntu 20.04</code> <em>(ubuntu-latest)</em> 或 <em>(ubuntu-20.04)</em></li>
<li><code>macOS Monterey 12</code> <em>(macos-12)</em></li>
<li><code>macOS Big Sur 11</code> <em>(macos-latest)</em>,<em>(macos-11)</em><!--rehype:className=style-arrow--></li>
</ul>
<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#%E9%80%89%E6%8B%A9-github-%E6%89%98%E7%AE%A1%E7%9A%84%E8%BF%90%E8%A1%8C%E5%99%A8">选择 GitHub 托管的运行器</a></p>
<h3 id="指定每项任务的步骤"><a href="#指定每项任务的步骤" class="headerlink" title="指定每项任务的步骤"></a>指定每项任务的步骤</h3><p>每个步骤都可以指定以下三个字段</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jobs.&lt;job_id&gt;.steps.name # 步骤名称</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">该步骤运行的命令或者 action</span></span><br><span class="line">jobs.&lt;job_id&gt;.steps.run</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">该步骤所需的环境变量</span></span><br><span class="line">jobs.&lt;job_id&gt;.steps.env</span><br></pre></td></tr></table></figure>

<p><code>steps</code> 字段指定每个 <code>Job</code> 的运行步骤，可以包含一个或多个步骤(<code>steps</code>)</p>
<figure class="highlight yml"><figcaption><span>&#123;4&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br></pre></td></tr></table></figure>

<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jobs.&lt;job_id&gt;.environment</span><br></pre></td></tr></table></figure>

<p>使用单一环境名称的示例</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span> <span class="string">staging_environment</span></span><br></pre></td></tr></table></figure>

<p>使用环境名称和 URL 的示例</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">production_environment</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://github.com</span></span><br></pre></td></tr></table></figure>

<h4 id="自定义环境变量"><a href="#自定义环境变量" class="headerlink" title="自定义环境变量"></a>自定义环境变量</h4><p><code>GitHub</code> 会保留 <code>GITHUB_</code> 环境变量前缀供 <code>GitHub</code> 内部使用。设置有 <code>GITHUB_</code> 前缀的环境变量或密码将导致错误。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">测试</span> <span class="string">nodejs</span> <span class="string">获取环境变量</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">API_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.API_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>在 <code>https://github.com/&lt;用户名&gt;/&lt;项目名称&gt;/settings/secrets</code> 中添加 <code>secrets</code> <code>API_TOKEN</code>，在工作流中设置环境变量 <a href="https://github.com/jaywcjlove/github-actions/blob/799b232fca3d9df0272eaa12610f9ebfca51b288/.github/workflows/ci.yml#L46"><code>API_TOKEN</code></a></p>
<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><p>在 <code>if</code> 条件下使用表达式时，可以省略表达式语法 (<code>$&#123;&#123; &#125;&#125;</code>)，因为 GitHub 会自动将 <code>if</code> 条件作为表达式求值</p>
<figure class="highlight yml"><figcaption><span>&#123;3&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/hello-world-action@v1.1</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.repository</span> <span class="string">==</span> <span class="string">&#x27;uiw/uiw-repo&#x27;</span></span><br><span class="line">    <span class="comment"># if: $&#123;&#123; &lt;expression&gt; &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>设置环境变量的示例</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">MY_ENV_VAR:</span> <span class="string">$&#123;&#123;</span> <span class="string">&lt;expression&gt;</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h4><ul>
<li><code>( )</code> <em>(逻辑分组)</em></li>
<li><code>[ ]</code> <em>(索引)</em></li>
<li><code>.</code> <em>(属性解引用)</em></li>
<li><code>!</code> <em>(非)</em></li>
<li><code>&lt;</code> <em>(小于)</em></li>
<li><code>&lt;=</code> <em>(小于或等于)</em></li>
<li><code>&gt;</code> <em>(大于)</em></li>
<li><code>&gt;=</code> <em>(大于或等于)</em></li>
<li><code>==</code> <em>(相等)</em></li>
<li><code>!=</code> <em>(不等)</em></li>
<li><code>&amp;&amp;</code> <em>(和)</em></li>
<li><code>||</code> <em>(或)</em><!--rehype:className=cols-2 style-none--></li>
</ul>
<h3 id="Github-上下文"><a href="#Github-上下文" class="headerlink" title="Github 上下文"></a>Github 上下文</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th>属性名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>github</code> <em>(object)</em></td>
<td>工作流程中任何作业或步骤期间可用的顶层上下文。</td>
<td></td>
</tr>
<tr>
<td><code>github.event</code> <em>(object)</em></td>
<td>完整事件 web 挂钩有效负载。 更多信息请参阅“触发工作流程的事件”。</td>
<td></td>
</tr>
<tr>
<td><code>github.event_path</code> <em>(string)</em></td>
<td>运行器上完整事件 web 挂钩有效负载的路径。</td>
<td></td>
</tr>
<tr>
<td><code>github.workflow</code> <em>(string)</em></td>
<td>工作流程的名称。 如果工作流程文件未指定 name，此属性的值将是仓库中工作流程文件的完整路径。</td>
<td></td>
</tr>
<tr>
<td><code>github.job</code> <em>(string)</em></td>
<td>当前作业的 job_id。</td>
<td></td>
</tr>
<tr>
<td><code>github.run_id</code> <em>(string)</em></td>
<td>仓库中每个运行的唯一编号。 如果您重新执行工作流程运行，此编号不变。</td>
<td></td>
</tr>
<tr>
<td><code>github.run_number</code> <em>(string)</em></td>
<td>仓库中特定工作流程每个运行的唯一编号。 此编号从 1（对应于工作流程的第一个运行）开始，然后随着每个新的运行而递增。 如果您重新执行工作流程运行，此编号不变。</td>
<td></td>
</tr>
<tr>
<td><code>github.actor</code> <em>(string)</em></td>
<td>发起工作流程运行的用户的登录名。</td>
<td></td>
</tr>
<tr>
<td><code>github.repository</code> <em>(string)</em></td>
<td>所有者和仓库名称。 例如 Codertocat&#x2F;Hello-World。</td>
<td></td>
</tr>
<tr>
<td><code>github.repository_owner</code> <em>(string)</em></td>
<td>仓库所有者的名称。 例如 Codertocat。</td>
<td></td>
</tr>
<tr>
<td><code>github.event_name</code> <em>(string)</em></td>
<td>触发工作流程运行的事件的名称。</td>
<td></td>
</tr>
<tr>
<td><code>github.sha</code> <em>(string)</em></td>
<td>触发工作流程的提交 SHA。</td>
<td></td>
</tr>
<tr>
<td><code>github.ref</code> <em>(string)</em></td>
<td>触发工作流程的分支或标记参考。</td>
<td></td>
</tr>
<tr>
<td><code>github.head_ref</code> <em>(string)</em></td>
<td>工作流程运行中拉取请求的 head_ref 或来源分支。 此属性仅在触发工作流程运行的事件为 pull_request 时才可用。</td>
<td></td>
</tr>
<tr>
<td><code>github.base_ref</code> <em>(string)</em></td>
<td>工作流程运行中拉取请求的 base_ref 或目标分支。 此属性仅在触发工作流程运行的事件为 pull_request 时才可用。</td>
<td></td>
</tr>
<tr>
<td><code>github.token</code> <em>(string)</em></td>
<td>代表仓库上安装的 GitHub 应用程序进行身份验证的令牌。 这在功能上等同于 GITHUB_TOKEN 密码。 更多信息请参阅“使用 GITHUB_TOKEN 验证身份”。</td>
<td></td>
</tr>
<tr>
<td><code>github.workspace</code> <em>(string)</em></td>
<td>使用 checkout 操作时步骤的默认工作目录和仓库的默认位置。</td>
<td></td>
</tr>
<tr>
<td><code>github.action</code> <em>(string)</em></td>
<td>正在运行的操作的名称。 在当前步骤运行脚本时，GitHub 删除特殊字符或使用名称 run。 如果在同一作业中多次使用相同的操作，则名称将包括带有序列号的后缀。 例如，运行的第一个脚本名称为 run1，则第二个脚本将命名为 run2。 同样，actions&#x2F;checkout 第二次调用时将变成 actionscheckout2。</td>
<td></td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<p><a target="_blank" rel="noopener" href="https://help.github.com/cn/actions/reference/context-and-expression-syntax-for-github-actions">Github 上下文</a>是访问有关工作流运行、运行器环境、作业和步骤的信息的一种方式</p>
<h3 id="默认环境变量"><a href="#默认环境变量" class="headerlink" title="默认环境变量"></a>默认环境变量</h3><table>
<thead>
<tr>
<th>环境变量</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>CI</code></td>
<td>始终设置为 <code>true</code></td>
</tr>
<tr>
<td><code>HOME</code></td>
<td>用于存储用户数据的 GitHub 主目录路径。 例如 <code>/github/home</code></td>
</tr>
<tr>
<td><code>GITHUB_WORKFLOW</code></td>
<td>工作流程的名称。</td>
</tr>
<tr>
<td><code>GITHUB_RUN_ID</code></td>
<td>仓库中每个运行的唯一编号。 如果您重新执行工作流程运行，此编号不变。</td>
</tr>
<tr>
<td><code>GITHUB_RUN_NUMBER</code></td>
<td>仓库中特定工作流程每个运行的唯一编号。 此编号从 1（对应于工作流程的第一个运行）开始，然后随着每个新的运行而递增。 如果您重新执行工作流程运行，此编号不变。</td>
</tr>
<tr>
<td><code>GITHUB_ACTION</code></td>
<td>操作唯一的标识符 (id)。</td>
</tr>
<tr>
<td><code>GITHUB_ACTIONS</code></td>
<td>当 GitHub 操作 运行工作流程时，始终设置为 true。 您可以使用此变量来区分测试是在本地运行还是通过 GitHub 操作 运行。</td>
</tr>
<tr>
<td><code>GITHUB_ACTION_PATH</code></td>
<td>GitHub 操作所在的路径</td>
</tr>
<tr>
<td><code>GITHUB_ACTOR</code></td>
<td>发起工作流程的个人或应用程序的名称。 例如 octocat</td>
</tr>
<tr>
<td><code>GITHUB_API_URL</code></td>
<td>返回 <code>API URL</code>。例如：<code>https://api.github.com</code></td>
</tr>
<tr>
<td><code>GITHUB_REPOSITORY</code></td>
<td>所有者和仓库名称。 例如 octocat&#x2F;Hello-World</td>
</tr>
<tr>
<td><code>GITHUB_EVENT_NAME</code></td>
<td>触发工作流程的 web 挂钩事件的名称</td>
</tr>
<tr>
<td><code>GITHUB_EVENT_PATH</code></td>
<td>具有完整 web 挂钩事件有效负载的文件路径。 例如 &#x2F;github&#x2F;workflow&#x2F;event.json</td>
</tr>
<tr>
<td><code>GITHUB_WORKSPACE</code></td>
<td>GitHub 工作空间目录路径。 如果您的工作流程使用 <a href="https://github.com/actions/checkout">actions&#x2F;checkout</a> 操作，工作空间目录将包含存储仓库副本的子目录。 如果不使用 <a href="https://github.com/actions/checkout">actions&#x2F;checkout</a> 操作，该目录将为空。 例如 &#x2F;home</td>
</tr>
<tr>
<td><code>GITHUB_SHA</code></td>
<td>触发工作流程的提交 SHA。 例如 ffac537e6cbbf9</td>
</tr>
<tr>
<td><code>GITHUB_REF</code></td>
<td>触发工作流程的分支或标记参考。 例如 refs&#x2F;heads&#x2F;feature-branch-1。 如果分支或标记都不适用于事件类型，则变量不会存在</td>
</tr>
<tr>
<td><code>GITHUB_HEAD_REF</code></td>
<td>仅为复刻的仓库设置。头部仓库的分支</td>
</tr>
<tr>
<td><code>GITHUB_BASE_REF</code></td>
<td>仅为复刻的仓库设置。基础仓库的分支</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/environment-variables#default-environment-variables">默认环境变量</a></p>
<h3 id="直接常量"><a href="#直接常量" class="headerlink" title="直接常量"></a>直接常量</h3><!--rehype:wrap-class=row-span-2-->

<p>作为表达式的一部分，可以使用 <code>boolean</code>, <code>null</code>, <code>number</code> 或 <code>string</code>数据类型</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">myNull:</span> <span class="string">$&#123;&#123;</span> <span class="literal">null</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myBoolean:</span> <span class="string">$&#123;&#123;</span> <span class="literal">false</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myIntegerNumber:</span> <span class="string">$&#123;&#123;</span> <span class="number">711</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myFloatNumber:</span> <span class="string">$&#123;&#123;</span> <span class="number">-9.2</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myHexNumber:</span> <span class="string">$&#123;&#123;</span> <span class="number">0xff</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myExponentialNumber:</span> <span class="string">$&#123;&#123;</span> <span class="number">-2.99e-2</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">myString:</span> <span class="string">Mona</span> <span class="string">the</span> <span class="string">Octocat</span></span><br><span class="line">  <span class="attr">myStringInBraces:</span> <span class="string">$&#123;&#123;</span> <span class="string">&#x27;It&#x27;</span><span class="string">&#x27;s source!&#x27;</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="函数-contains"><a href="#函数-contains" class="headerlink" title="函数 contains"></a>函数 contains</h3><!--rehype:wrap-class=row-span-2-->

<p>使用字符串的示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">contains</span>(<span class="string">&#x27;Hello world&#x27;</span>, <span class="string">&#x27;llo&#x27;</span>) <span class="comment">// 返回 true</span></span><br></pre></td></tr></table></figure>

<p>使用对象过滤器的示例返回 true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">contains</span>(github.<span class="property">event</span>.<span class="property">issue</span>.<span class="property">labels</span>.*.<span class="property">name</span>, <span class="string">&#x27;bug&#x27;</span>)</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#contains">函数 contains</a></p>
<h3 id="函数-startsWith"><a href="#函数-startsWith" class="headerlink" title="函数 startsWith"></a>函数 startsWith</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">startsWith</span>(<span class="string">&#x27;Hello world&#x27;</span>, <span class="string">&#x27;He&#x27;</span>) <span class="comment">// 返回 true</span></span><br></pre></td></tr></table></figure>

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#startswith">函数 startsWith</a>，此函数不区分大小写</p>
<h3 id="函数-format"><a href="#函数-format" class="headerlink" title="函数 format"></a>函数 format</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">format</span>(<span class="string">&#x27;&#123;&#123;Hello &#123;0&#125; &#123;1&#125; &#123;2&#125;!&#125;&#125;&#x27;</span>, <span class="string">&#x27;Mona&#x27;</span>, <span class="string">&#x27;the&#x27;</span>, <span class="string">&#x27;Octocat&#x27;</span>)</span><br><span class="line"><span class="comment">// 返回 &#x27;&#123;Hello Mona the Octocat!&#125;&#x27;.</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#format">函数 format</a></p>
<h3 id="函数-join"><a href="#函数-join" class="headerlink" title="函数 join"></a>函数 join</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">join</span>(github.<span class="property">event</span>.<span class="property">issue</span>.<span class="property">labels</span>.*.<span class="property">name</span>, <span class="string">&#x27;, &#x27;</span>)</span><br><span class="line"><span class="comment">// 也许返回 &#x27;bug, help wanted&#x27;.</span></span><br></pre></td></tr></table></figure>

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#join">函数 join</a></p>
<h3 id="函数-toJSON"><a href="#函数-toJSON" class="headerlink" title="函数 toJSON"></a>函数 toJSON</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">toJSON</span>(job)</span><br><span class="line"><span class="comment">// 也许返回 &#123; &quot;status&quot;: &quot;Success&quot; &#125;.</span></span><br></pre></td></tr></table></figure>

<p>另见: <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#tojson">函数 toJSON</a></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>fromJSON</code></td>
<td align="left">返回 JSON 对象或 JSON 数据类型的值 <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#fromjson">#</a></td>
</tr>
<tr>
<td align="left"><code>hashFiles</code></td>
<td align="left">返回与路径模式匹配的文件集的单个哈希 <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#hashfiles">#</a></td>
</tr>
<tr>
<td align="left"><code>success</code></td>
<td align="left">当前面的步骤都没失败或被取消时返回 true <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#success">#</a></td>
</tr>
<tr>
<td align="left"><code>always</code></td>
<td align="left">使步骤始终执行，返回 <code>true</code> 即使取消也是如此 <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#always">#</a></td>
</tr>
<tr>
<td align="left"><code>cancelled</code></td>
<td align="left">如果工作流被取消，则返回 true <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#cancelled">#</a></td>
</tr>
<tr>
<td align="left"><code>failure</code></td>
<td align="left">当作业的任何先前步骤失败时返回 true <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#failure">#</a></td>
</tr>
</tbody></table>
<h3 id="函数-success"><a href="#函数-success" class="headerlink" title="函数 success()"></a>函数 success()</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">作业已成功</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">success()</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="函数-failure"><a href="#函数-failure" class="headerlink" title="函数 failure()"></a>函数 failure()</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">作业失败</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="常用实例"><a href="#常用实例" class="headerlink" title="常用实例"></a>常用实例</h2><h3 id="获取版本信息"><a href="#获取版本信息" class="headerlink" title="获取版本信息"></a>获取版本信息</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Test</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    # Strip git ref prefix from version</span></span><br><span class="line"><span class="string">    echo &quot;$&#123;&#123; github.ref &#125;&#125;&quot;</span></span><br><span class="line"><span class="string">    # VERSION=$(echo &quot;$&#123;&#123; github.ref &#125;&#125;&quot; | sed -e &#x27;s,.*/\(.*\),\1,&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="comment"># # Strip &quot;v&quot; prefix from tag name</span></span><br><span class="line">    <span class="comment"># [[ &quot;$&#123;&#123; github.ref &#125;&#125;&quot; == &quot;refs/tags/&quot;* ]] &amp;&amp; VERSION=$(echo $VERSION | sed -e &#x27;s/^v//&#x27;)</span></span><br><span class="line">    <span class="string">echo</span> <span class="string">&quot;$VERSION&quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<h3 id="提交到-gh-pages-分支"><a href="#提交到-gh-pages-分支" class="headerlink" title="提交到 gh-pages 分支"></a>提交到 gh-pages 分支</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">github_token:</span> <span class="string">$&#123;&#123;secrets.GITHUB_TOKEN&#125;&#125;</span></span><br><span class="line">    <span class="attr">publish_dir:</span> <span class="string">./build</span></span><br></pre></td></tr></table></figure>

<h3 id="修改-package-json"><a href="#修改-package-json" class="headerlink" title="修改 package.json"></a>修改 package.json</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Modify</span> <span class="string">Version</span></span><br><span class="line">  <span class="attr">shell:</span> <span class="string">bash</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">    <span class="string">node</span> <span class="string">-e</span> <span class="string">&#x27;var pkg = require(&quot;./package.json&quot;); pkg.version= (new Date().getFullYear().toString().substr(2)) + &quot;.&quot; + (new Date().getMonth() + 1) + &quot;.&quot; + (new Date().getDate()); require(&quot;fs&quot;).writeFileSync(&quot;./package.json&quot;, JSON.stringify(pkg, null, 2))&#x27;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<p>使用 <a href="https://github.com/jaywcjlove/github-action-package">github-action-package</a> 修改 <code>name</code> 字段</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">package.json</span> <span class="string">info</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">jaywcjlove/github-action-package@main</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">rename:</span> <span class="string">&#x27;@wcj/github-package-test&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="克隆带有-Submodule-的仓库"><a href="#克隆带有-Submodule-的仓库" class="headerlink" title="克隆带有 Submodule 的仓库"></a>克隆带有 Submodule 的仓库</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">main</span></span><br><span class="line">    <span class="attr">submodules:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><code>submodules</code>：<code>true</code> 检出子模块或 <code>recursive</code> 递归检出子模块</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clone</span> <span class="string">sub</span> <span class="string">repository</span></span><br><span class="line">  <span class="attr">shell:</span> <span class="string">bash</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;</span></span><br><span class="line"><span class="string">    # git submodule sync --recursive</span></span><br><span class="line"><span class="string">    # git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --remote --force --recursive --checkout ant.design</span></span><br></pre></td></tr></table></figure>

<h3 id="步骤依赖作业"><a href="#步骤依赖作业" class="headerlink" title="步骤依赖作业"></a>步骤依赖作业</h3><!--rehype:wrap-class=row-span-2-->

<p>使用 <code>jobs.&lt;job_id&gt;.needs</code> 识别在此作业运行之前必须成功完成的任何作业。它可以是一个字符串，也可以是字符串数组。 如果某个作业失败，则所有需要它的作业都会被跳过，除非这些作业使用让该作业继续的条件表达式。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">  <span class="attr">job3:</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">job1</span>, <span class="string">job2</span>]</span><br></pre></td></tr></table></figure>

<p>在此示例中，<code>job1</code> 必须在 <code>job2</code> 开始之前成功完成，而 <code>job3</code> 要等待 <code>job1</code> 和 <code>job2</code> 完成。此示例中的作业按顺序运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">❶ job1</span><br><span class="line">❷ job2</span><br><span class="line">❸ job3</span><br></pre></td></tr></table></figure>

<p>配置如下</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">  <span class="attr">job3:</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">always()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">job1</span>, <span class="string">job2</span>]</span><br></pre></td></tr></table></figure>

<p>在此示例中，<code>job3</code> 使用 <code>always()</code> 条件表达式，因此它始终在 <code>job1</code> 和 <code>job2</code> 完成后运行，不管它们是否成功。</p>
<h3 id="同步-Gitee"><a href="#同步-Gitee" class="headerlink" title="同步 Gitee"></a>同步 Gitee</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    mirror() &#123;</span></span><br><span class="line"><span class="string">      git clone &quot;https://github.com/$1/$2&quot;</span></span><br><span class="line"><span class="string">      cd &quot;$2&quot;</span></span><br><span class="line"><span class="string">      git remote add gitee &quot;https://jaywcjlove:$&#123;&#123; secrets.GITEE_TOKEN &#125;&#125;@gitee.com/uiw/$2&quot;</span></span><br><span class="line"><span class="string">      git remote set-head origin -d</span></span><br><span class="line"><span class="string">      git push gitee --prune +refs/remotes/origin/*:refs/heads/* +refs/tags/*:refs/tags/*</span></span><br><span class="line"><span class="string">      cd ..</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    mirror uiwjs uiw</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<h3 id="提交-NPM-包"><a href="#提交-NPM-包" class="headerlink" title="提交 NPM 包"></a>提交 NPM 包</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span> <span class="string">--access</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.NPM_TOKEN&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>获取 <code>NPM_TOKEN</code>，可以通过 <a target="_blank" rel="noopener" href="https://www.npmjs.com/settings/wcjiang/tokens">npm</a> 账号创建 <code>token</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm token list [--json|--parseable] # 查看</span><br><span class="line">npm token create [--read-only] [--cidr=1.1.1.1/24,2.2.2.2/16] # 创建</span><br><span class="line">npm token revoke &lt;id|token&gt; # 撤销</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<p>可以使用 <a href="https://github.com/JS-DevTools/npm-publish">JS-DevTools&#x2F;npm-publish</a> 提交</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span>  <span class="string">📦</span> <span class="string">@province-city-china/data</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">JS-DevTools/npm-publish@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">package:</span> <span class="string">packages/data/package.json</span></span><br></pre></td></tr></table></figure>

<p>它有个好处，检测 <code>package.json</code> 中版本号是否发生变更，来决定是否提交版本，不会引发流程错误。</p>
<h3 id="步骤作业文件共享"><a href="#步骤作业文件共享" class="headerlink" title="步骤作业文件共享"></a>步骤作业文件共享</h3><p>Artifacts 是 GitHub Actions 为您提供持久文件并在运行完成后使用它们或在作业（文档）之间共享的一种方式。</p>
<p>要创建工件并使用它，您将需要不同的操作：上传和下载。<br>要上传文件或目录，您只需像这样使用它：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">path/to/artifact</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">hello</span> <span class="string">&gt;</span> <span class="string">path/to/artifact/a.txt</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/upload-artifact@v2</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">my-artifact</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">path/to/artifact/a.txt</span></span><br></pre></td></tr></table></figure>

<p>然后下载 <code>artifact</code> 以使用它：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/download-artifact@v2</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">my-artifact</span></span><br></pre></td></tr></table></figure>

<h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">node-version:</span> <span class="number">14</span></span><br></pre></td></tr></table></figure>

<p>使用<a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategy">矩阵策略</a> 在 nodejs 不同版本中运行</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">strategy:</span></span><br><span class="line">  <span class="attr">matrix:</span></span><br><span class="line">    <span class="attr">node-version:</span> [<span class="number">10.</span><span class="string">x</span>, <span class="number">12.</span><span class="string">x</span>, <span class="number">14.</span><span class="string">x</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">使用</span> <span class="string">Node</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span> <span class="string">--if-present</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<h3 id="提交-docker-镜像"><a href="#提交-docker-镜像" class="headerlink" title="提交 docker 镜像"></a>提交 docker 镜像</h3><!--rehype:wrap-class=col-span-2 row-span-2-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://www.basefactor.com/github-actions-docker</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Docker</span> <span class="string">login</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">-u</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;</span> <span class="string">-p</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">ant.design</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    cd ./ant\.design</span></span><br><span class="line"><span class="string">    docker build -t ant.design .</span></span><br><span class="line"><span class="string"></span><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tags</span> <span class="string">&amp;</span> <span class="string">Push</span> <span class="string">docs</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    # Strip git ref prefix from version</span></span><br><span class="line"><span class="string">    VERSION=$(echo &quot;$&#123;&#123; github.ref &#125;&#125;&quot; | sed -e &#x27;s,.*/\(.*\),\1,&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="comment"># Strip &quot;v&quot; prefix from tag name</span></span><br><span class="line">    [[ <span class="string">&quot;$<span class="template-variable">&#123;&#123; github.ref &#125;&#125;</span>&quot;</span> <span class="string">==</span> <span class="string">&quot;refs/tags/&quot;</span><span class="string">*</span> ]] <span class="string">&amp;&amp;</span> <span class="string">VERSION=$(echo</span> <span class="string">$VERSION</span> <span class="string">|</span> <span class="string">sed</span> <span class="string">-e</span> <span class="string">&#x27;s/^v//&#x27;</span><span class="string">)</span></span><br><span class="line"></span><br><span class="line">    <span class="string">docker</span> <span class="string">tag</span> <span class="string">ant.design</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/ant.design:$VERSION</span></span><br><span class="line">    <span class="string">docker</span> <span class="string">tag</span> <span class="string">ant.design</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/ant.design:latest</span></span><br><span class="line">    <span class="string">docker</span> <span class="string">push</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/ant.design:$VERSION</span></span><br><span class="line">    <span class="string">docker</span> <span class="string">push</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/ant.design:latest</span></span><br></pre></td></tr></table></figure>

<h3 id="创建一个-tag"><a href="#创建一个-tag" class="headerlink" title="创建一个 tag"></a>创建一个 tag</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">Tag</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">create_tag</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">jaywcjlove/create-tag-action@main</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">package-path:</span> <span class="string">./package.json</span></span><br></pre></td></tr></table></figure>

<p>根据 <code>package-path</code> 指定的 <code>package.json</code> 检测 <code>version</code> 是否发生变化来创建 <code>tag</code></p>
<h3 id="生成-git-提交日志"><a href="#生成-git-提交日志" class="headerlink" title="生成 git 提交日志"></a>生成 git 提交日志</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Changelog</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">changelog</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">jaywcjlove/changelog-generator@main</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">filter-author:</span> <span class="string">(小弟调调™)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">the</span> <span class="string">changelog</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; steps.changelog.outputs.changelog &#125;&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<h3 id="提交到-GitHub-docker-镜像仓库"><a href="#提交到-GitHub-docker-镜像仓库" class="headerlink" title="提交到 GitHub docker 镜像仓库"></a>提交到 GitHub docker 镜像仓库</h3><!--rehype:wrap-class=col-span-3-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;登录到 GitHub 注册表&#x27;</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$&#123;&#123;</span> <span class="string">github.token</span> <span class="string">&#125;&#125;</span> <span class="string">|</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">ghcr.io</span> <span class="string">-u</span> <span class="string">$&#123;&#123;</span> <span class="string">github.actor</span> <span class="string">&#125;&#125;</span> <span class="string">--password-stdin</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;编译 docker image&#x27;</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">ghcr.io/jaywcjlove/reference:latest</span> <span class="string">.</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;推送到 GitHub 注册表中&#x27;</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">docker</span> <span class="string">push</span> <span class="string">ghcr.io/jaywcjlove/reference:latest</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;标记 docker 镜像并发布到 GitHub 注册表&#x27;</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">steps.create_tag.outputs.successful</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    echo &quot;version: v$&#123;&#123; steps.changelog.outputs.version &#125;&#125;&quot;</span></span><br><span class="line"><span class="string">    docker tag ghcr.io/jaywcjlove/reference:latest ghcr.io/jaywcjlove/reference:$&#123;&#123;steps.changelog.outputs.version&#125;&#125;</span></span><br><span class="line"><span class="string">    docker push ghcr.io/jaywcjlove/reference:$&#123;&#123;steps.changelog.outputs.version&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="提交-commit-到-master-分支"><a href="#提交-commit-到-master-分支" class="headerlink" title="提交 commit 到 master 分支"></a>提交 commit 到 master 分支</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成一个文件，并将它提交到</span> <span class="string">master</span> <span class="string">分支</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    # Strip git ref prefix from version</span></span><br><span class="line"><span class="string">    VERSION=$(echo &quot;$&#123;&#123; github.ref &#125;&#125;&quot; | sed -e &#x27;s,.*/\(.*\),\1,&#x27;)</span></span><br><span class="line"><span class="string">    COMMIT=released-$&#123;VERSION&#125;</span></span><br><span class="line"><span class="string">    # Strip &quot;v&quot; prefix from tag name</span></span><br><span class="line"><span class="string">    [[ &quot;$&#123;&#123; github.ref &#125;&#125;&quot; == &quot;refs/tags/&quot;* ]] &amp;&amp; VERSION=$(echo $VERSION | sed -e &#x27;s/^v//&#x27;)</span></span><br><span class="line"><span class="string">    echo &quot;输出版本号：$VERSION&quot;</span></span><br><span class="line"><span class="string">    # 将版本输出到当前 VERSION 文件中</span></span><br><span class="line"><span class="string">    echo &quot;$VERSION&quot; &gt; VERSION</span></span><br><span class="line"><span class="string">    echo &quot;1. 输出Commit：$commit&quot;</span></span><br><span class="line"><span class="string">    echo &quot;2. Released $VERSION&quot;</span></span><br><span class="line"><span class="string">    git fetch</span></span><br><span class="line"><span class="string">    git config --local user.email &quot;action@github.com&quot;</span></span><br><span class="line"><span class="string">    git config --local user.name &quot;GitHub Action&quot;</span></span><br><span class="line"><span class="string">    git add .</span></span><br><span class="line"><span class="string">    git commit -am $COMMIT</span></span><br><span class="line"><span class="string">    git branch -av</span></span><br><span class="line"><span class="string">    git pull origin master</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">将上面的提交</span> <span class="string">push</span> <span class="string">到</span> <span class="string">master</span> <span class="string">分支</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">ad-m/github-push-action@master</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="作业之间共享数据"><a href="#作业之间共享数据" class="headerlink" title="作业之间共享数据"></a>作业之间共享数据</h3><p>创建一个文件，然后将其作为构件上传</p>
<figure class="highlight yml"><figcaption><span>&#123;11&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example-job:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Save</span> <span class="string">output</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">shell:</span> <span class="string">bash</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          expr 1 + 1 &gt; output.log</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Upload</span> <span class="string">output</span> <span class="string">file</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/upload-artifact@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">output-log-file</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">output.log</span></span><br></pre></td></tr></table></figure>

<p>可以下载名为 <code>output-log-file</code> 的工件</p>
<figure class="highlight yml"><figcaption><span>&#123;7&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example-job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Download</span> <span class="string">a</span> <span class="string">single</span> <span class="string">artifact</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/download-artifact@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">output-log-file</span></span><br></pre></td></tr></table></figure>

<h3 id="指定运行命令的工作目录"><a href="#指定运行命令的工作目录" class="headerlink" title="指定运行命令的工作目录"></a>指定运行命令的工作目录</h3><figure class="highlight yml"><figcaption><span>&#123;3&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clean</span> <span class="string">temp</span> <span class="string">directory</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">*</span></span><br><span class="line">  <span class="attr">working-directory:</span> <span class="string">./temp</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>working-directory</code> 关键字，您可以指定运行命令的工作目录(<code>./temp</code>)</p>
<h4 id="defaults-run"><a href="#defaults-run" class="headerlink" title="defaults.run"></a>defaults.run</h4><figure class="highlight yml"><figcaption><span>&#123;4,5,7&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">defaults:</span></span><br><span class="line">      <span class="attr">run:</span></span><br><span class="line">        <span class="attr">shell:</span> <span class="string">bash</span></span><br><span class="line">        <span class="attr">working-directory:</span> <span class="string">scripts</span></span><br></pre></td></tr></table></figure>

<p>作业中的所有 <code>run</code> 步骤提供默认的 <code>shell</code> 和 <code>working-directory</code></p>
<h3 id="jobs-steps-shell"><a href="#jobs-steps-shell" class="headerlink" title="jobs..steps[*].shell"></a>jobs.<job_id>.steps[*].shell</h3><p>使用 <code>bash</code> 运行脚本</p>
<figure class="highlight yml"><figcaption><span>&#123;4&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$PATH</span></span><br><span class="line">    <span class="attr">shell:</span> <span class="string">bash</span></span><br></pre></td></tr></table></figure>

<p>运行 <code>python</code> 脚本</p>
<figure class="highlight yml"><figcaption><span>&#123;6&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      import os</span></span><br><span class="line"><span class="string">      print(os.environ[&#x27;PATH&#x27;])</span></span><br><span class="line"><span class="string"></span>    <span class="attr">shell:</span> <span class="string">python</span></span><br></pre></td></tr></table></figure>

<p>您可以使用 <code>shell</code> 关键字覆盖运行器操作系统中的默认 <code>shell</code> 设置</p>
<h3 id="一些-actions-推荐"><a href="#一些-actions-推荐" class="headerlink" title="一些 actions 推荐"></a>一些 actions 推荐</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a href="https://github.com/jaywcjlove/create-tag-action"><code>create-tag-action</code></a></td>
<td align="left">根据 package.json 创建 <code>Tag</code> &#x2F; <code>Release</code></td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/changelog-generator"><code>changelog-generator</code></a></td>
<td align="left">生成 <code>changelog</code> 日志</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/github-action-modify-file-content"><code>github-action-modify-file-content</code></a></td>
<td align="left">修改仓库文件内容</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/github-action-contributors"><code>github-action-contributors</code></a></td>
<td align="left">生成贡献(contributors.svg)图片</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/generated-badges"><code>generated-badges</code></a></td>
<td align="left">生成徽章(Badges)图片</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/coverage-badges-cli"><code>coverage-badges-cli</code></a></td>
<td align="left">生成覆盖率徽章(Badges)图片</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/action-ejs"><code>action-ejs</code></a></td>
<td align="left">基于 ejs 生成 HTML</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/github-action-package"><code>github-action-package</code></a></td>
<td align="left">修改 JSON 文件内容</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/github-action-read-file"><code>github-action-read-file</code></a></td>
<td align="left">读取文件内容</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/jaywcjlove/markdown-to-html-cli"><code>markdown-to-html-cli</code></a></td>
<td align="left">Markdown 转换成 HTML</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/ncipollo/release-action"><code>ncipollo/release-action</code></a></td>
<td align="left">创建 <code>Release</code></td>
</tr>
<tr>
<td align="left"><a href="https://github.com/peaceiris/actions-gh-pages"><code>peaceiris/actions-gh-pages</code></a></td>
<td align="left">将文件或文件夹内容提交到 <code>gh-pages</code> 分支</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-->

<h3 id="在-Github-中创建-Docker-镜像"><a href="#在-Github-中创建-Docker-镜像" class="headerlink" title="在 Github 中创建 Docker 镜像"></a>在 Github 中创建 Docker 镜像</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Docker</span> <span class="string">Buildx</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/setup-buildx-action@v2</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">登录</span> <span class="string">GitHub</span> <span class="string">容器注册表</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">registry:</span> <span class="string">ghcr.io</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.actor</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">构建并推送</span> <span class="string">image:latest</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/build-push-action@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">platforms:</span> <span class="string">linux/amd64,linux/arm64</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">ghcr.io/jaywcjlove/reference:latest</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">构建并推送</span> <span class="string">image:tags</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/build-push-action@v3</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">steps.create_tag.outputs.successful</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">platforms:</span> <span class="string">linux/amd64,linux/arm64</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">ghcr.io/jaywcjlove/reference:$&#123;&#123;steps.changelog.outputs.version&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="在-Docker-Hub-中创建-Docker-镜像"><a href="#在-Docker-Hub-中创建-Docker-镜像" class="headerlink" title="在 Docker Hub 中创建 Docker 镜像"></a>在 Docker Hub 中创建 Docker 镜像</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Docker</span> <span class="string">Buildx</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/setup-buildx-action@v2</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">登录到</span> <span class="string">Docker</span> <span class="string">Hub</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">构建并推送</span> <span class="string">image:latest</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/build-push-action@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">platforms:</span> <span class="string">linux/amd64,linux/arm64</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/reference:latest</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">构建并推送</span> <span class="string">image:tags</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/build-push-action@v3</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">steps.create_tag.outputs.successful</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">platforms:</span> <span class="string">linux/amd64,linux/arm64</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USER</span> <span class="string">&#125;&#125;/reference:$&#123;&#123;steps.changelog.outputs.version&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="检查签出仓库并安装-nodejs"><a href="#检查签出仓库并安装-nodejs" class="headerlink" title="检查签出仓库并安装 nodejs"></a>检查签出仓库并安装 nodejs</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">node-version:</span> <span class="number">16</span></span><br></pre></td></tr></table></figure>

<h3 id="生成贡献者头像列表"><a href="#生成贡献者头像列表" class="headerlink" title="生成贡献者头像列表"></a>生成贡献者头像列表</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Contributors</span> <span class="string">Images</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">jaywcjlove/github-action-contributors@main</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">contributors</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">output:</span> <span class="string">dist/CONTRIBUTORS.svg</span></span><br><span class="line">    <span class="attr">avatarSize:</span> <span class="number">42</span></span><br></pre></td></tr></table></figure>

<h3 id="忽略失败"><a href="#忽略失败" class="headerlink" title="忽略失败"></a>忽略失败</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">  <span class="attr">continue-on-error:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>当 <code>npm</code> 推送包失败不影响整个流程，可用于自动发包</p>
<h2 id="GitLab-CI-CD-迁移到-GitHub-Actions"><a href="#GitLab-CI-CD-迁移到-GitHub-Actions" class="headerlink" title="GitLab CI&#x2F;CD 迁移到 GitHub Actions"></a>GitLab CI&#x2F;CD 迁移到 GitHub Actions</h2><h3 id="语法示例"><a href="#语法示例" class="headerlink" title="语法示例"></a>语法示例</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">job1:</span></span><br><span class="line">  <span class="attr">variables:</span></span><br><span class="line">    <span class="attr">GIT_CHECKOUT:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Run your script here&quot;</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;Run your script here&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="运行程序"><a href="#运行程序" class="headerlink" title="运行程序"></a>运行程序</h3><!--rehype:wrap-class=row-span-2-->

<p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">windows_job:</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">windows</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">Hello,</span> <span class="string">%USERNAME%!</span></span><br><span class="line"></span><br><span class="line"><span class="attr">linux_job: tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">linux script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Hello, $USER!&quot;</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">windows_job:</span></span><br><span class="line">  <span class="attr">runs-on:</span> <span class="string">windows-latest</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">Hello,</span> <span class="string">%USERNAME%!</span></span><br><span class="line"></span><br><span class="line"><span class="attr">linux_job:</span></span><br><span class="line">  <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;Hello, $USER!&quot;</span></span><br></pre></td></tr></table></figure>

<p>在不同的平台上运行作业</p>
<h3 id="Docker-映像"><a href="#Docker-映像" class="headerlink" title="Docker 映像"></a>Docker 映像</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">my_job:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">node:10.16-jessie</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_job:</span></span><br><span class="line">    <span class="attr">container:</span> <span class="string">node:10.16-jessie</span></span><br></pre></td></tr></table></figure>

<h3 id="条件和表达式语法"><a href="#条件和表达式语法" class="headerlink" title="条件和表达式语法"></a>条件和表达式语法</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy_prod:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;部署到生产服务器&quot;</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">&#x27;$CI_COMMIT_BRANCH == &quot;master&quot;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy_prod:</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">contains(</span> <span class="string">github.ref,</span> <span class="string">&#x27;master&#x27;</span><span class="string">)</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;部署到生产服务器&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Artifacts"><a href="#Artifacts" class="headerlink" title="Artifacts"></a>Artifacts</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="attr">artifacts:</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">math-homework.txt</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Upload</span> <span class="string">math</span> <span class="string">result</span> <span class="string">for</span> <span class="string">job</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/upload-artifact@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">homework</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">math-homework.txt</span></span><br></pre></td></tr></table></figure>

<h3 id="作业之间的依赖关系"><a href="#作业之间的依赖关系" class="headerlink" title="作业之间的依赖关系"></a>作业之间的依赖关系</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">build</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">build_a: stage: build script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;该作业将首先运行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">build_b: stage: build script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;该作业将首先运行，与 build_a 并行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">test_ab: stage: test script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;此作业将在 build_a 和 build_b 完成后运行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy_ab: stage: deploy script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;此作业将在 test_ab 完成后运行&quot;</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build_a:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;该作业将首先运行&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">build_b:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;该作业将首先运行，与 build_a 并行&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">test_ab:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">build_a</span>,<span class="string">build_b</span>]</span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;此作业将在 build_a 和 build_b 完成后运行&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">deploy_ab:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">test_ab</span>]</span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;此作业将在 test_ab 完成后运行&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">node:latest</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache: key:</span> <span class="string">$CI_COMMIT_REF_SLUG</span> <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.npm/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">ci</span> <span class="string">--cache</span> <span class="string">.npm</span> <span class="string">--prefer-offline</span></span><br><span class="line"></span><br><span class="line"><span class="attr">test_async: script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node</span> <span class="string">./specs/start.js</span> <span class="string">./specs/async.spec.js</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test_async:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">node</span> <span class="string">modules</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">~/.npm</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">v1-npm-deps-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">restore-keys:</span> <span class="string">v1-npm-deps-</span></span><br></pre></td></tr></table></figure>

<h3 id="数据库和服务容器"><a href="#数据库和服务容器" class="headerlink" title="数据库和服务容器"></a>数据库和服务容器</h3><p><yel>GitLab CI&#x2F;CD</yel></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">container-job:</span></span><br><span class="line">  <span class="attr">variables:</span></span><br><span class="line">    <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="comment"># PostgreSQL 服务容器通信的主机名</span></span><br><span class="line">    <span class="attr">POSTGRES_HOST:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="comment"># 默认的 PostgreSQL 端口</span></span><br><span class="line">    <span class="attr">POSTGRES_PORT:</span> <span class="number">5432</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">node:10.18-jessie</span></span><br><span class="line">  <span class="attr">services:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">postgres</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="comment"># 执行 package.json 文件中</span></span><br><span class="line">    <span class="comment"># 所有依赖项的全新安装</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">    <span class="comment"># 运行创建 PostgreSQL 客户端的脚本，</span></span><br><span class="line">    <span class="comment"># 用数据填充客户端，并检索数据</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node</span> <span class="string">client.js</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span></span><br></pre></td></tr></table></figure>

<p>GitHub Actions</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">container-job:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">container:</span> <span class="string">node:10.18-jessie</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">services:</span></span><br><span class="line">      <span class="attr">postgres:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">postgres</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">postgres</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">out</span> <span class="string">repository</span> <span class="string">code</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 执行 package.json 文件中</span></span><br><span class="line">      <span class="comment"># 所有依赖项的全新安装</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Connect</span> <span class="string">to</span> <span class="string">PostgreSQL</span></span><br><span class="line">        <span class="comment"># 运行创建 PostgreSQL 客户端的脚本，</span></span><br><span class="line">        <span class="comment"># 用数据填充客户端，并检索数据</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">node</span> <span class="string">client.js</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># PostgreSQL 服务容器通信的主机名</span></span><br><span class="line">          <span class="attr">POSTGRES_HOST:</span> <span class="string">postgres</span></span><br><span class="line">          <span class="comment"># 默认的 PostgreSQL 端口</span></span><br><span class="line">          <span class="attr">POSTGRES_PORT:</span> <span class="number">5432</span></span><br></pre></td></tr></table></figure>

<h2 id="另见"><a href="#另见" class="headerlink" title="另见"></a>另见</h2><ul>
<li><a target="_blank" rel="noopener" href="https://jaywcjlove.github.io/github-actions">Github Actions 学习笔记</a> <em>(jaywcjlove.github.io)</em></li>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions">了解 GitHub Actions</a> <em>(docs.github.com)</em></li>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/migrating-to-github-actions/migrating-from-gitlab-cicd-to-github-actions">从 GitLab CI&#x2F;CD 迁移到 GitHub Actions</a> <em>(docs.github.com)</em></li>
</ul>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://github.com/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-actions/" title="Github Actions 备忘清单" target="_blank" rel="external">https://github.com/k705/kk.github.io.git/2024/04/08/快速参考-github-actions/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/cofess" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/k705/kk.github.io.git/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/cofess" target="_blank"><span class="text-dark">KK</span><small class="ml-1x">前端工程师</small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-git/" title="Git 备忘清单"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/k705/kk.github.io.git/2024/04/08/%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83-github-copilot/" title="Github Copilot 备忘清单"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/k705/kk.github.io.git/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/k705/kk.github.io.git/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/k705/kk.github.io.git/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/k705/kk.github.io.git/js/plugin.min.js"></script>


<script src="/k705/kk.github.io.git/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/k705/kk.github.io.git/',
        CONTENT_URL: '/k705/kk.github.io.git/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/k705/kk.github.io.git/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>